<template>
    <lightning-card title="Accounts" icon-name="custom:custom63">
        <div class="slds-m-around_large">
            <div if:false={isLoaded} class="slds-is-relative">
                <lightning-spinner
                    alternative-text="Loading...">
                </lightning-spinner>
            </div>
        </div>
        <div if:true={isTablePage}>
            <c-account-table
                onprevious={handlePrevious}
                onnext={handleNext}
                onfirst={handleFirst}
                onlast={handleLast}
                onnew={handleNewRecord}
                onrowid={getRecordId}
                onrefreshtable={handleGetAccounts}
                accounts={results.accounts}
                columns={columns}
                page={page}
                total-pages={totalPages}
                is-first-page={isFirstPage}
                is-last-page={isLastPage}>
            </c-account-table>
        </div>
        <div if:true={isViewPage}>
            <c-account-detail-view
                onback={handleBack}
                onloadform={handleLoadFinish}
                onloadformstart={handleLoadStart}
                fields={results.accountFields}
                updateable-fields={results.accountUpdateableColumns}
                record-id={recordId}>
            </c-account-detail-view>
        </div>
        <div if:true={isCreateRecordPage}>
            <c-account-creator
                onback={handleBack}
                fields={results.accountUpdateableColumns}>
            </c-account-creator>
        </div>
    </lightning-card>
</template>